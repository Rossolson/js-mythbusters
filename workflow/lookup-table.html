<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/style.css?t=a44c9e9d">
    <link rel="stylesheet" href="../assets/css/build.css?t=8aa3b5f9">
    <script src="../assets/js/main.js?t=867afd68"></script>
    <script src="../assets/script.js?t=2bcc4b59"></script>
    <title>Lookup table</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-workflowlookup-table">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/Kikobeats/js-mythbusters" data-title="Kikobeats/js-mythbusters" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="lookup-table-for-result-matching">Lookup table for result matching</h1>
<p>When we optimizing <code>if</code>/<code>else</code>, the goal is always to minimize the number of conditions to evaluate before taking the correct path. The easiest optimization is therefore to ensure that the most common conditions are first:</p>
<pre><code class="lang-js"><span class="pl-k">if</span> (value &lt; <span class="hljs-number">5</span>) {
  <span class="pl-c">// most frequency case</span>
} <span class="pl-k">else</span> <span class="pl-k">if</span> (value &gt; <span class="hljs-number">5</span> &amp;&amp; value &lt; <span class="hljs-number">10</span>) {
  <span class="pl-c">// second frequency case</span>
} <span class="pl-k">else</span> {
 <span class="pl-c">// in other case</span>
}
</code></pre>
<p><code>switch</code> is more or less the same (maybe more semantic and more structured code). But the point is makes the reduce the path size.</p>
<p>Better use a direct match approach based in object/array index:</p>
<pre><code class="lang-js"><span class="pl-k">var</span> lookupTable = {
  <span class="pl-s">&apos;1&apos;</span>: <span class="pl-s">&apos;is greater&apos;</span>,
  <span class="pl-s">&apos;-1&apos;</span>: <span class="pl-s">&apos;is less&apos;</span>,
  <span class="pl-s">&apos;0&apos;</span>: <span class="pl-s">&apos;is equal&apos;</span>
}

<span class="pl-k">var</span> myValue = <span class="hljs-number">5</span>

lookupTable[compare(<span class="hljs-number">4</span>, myValue)]
</code></pre>
<p>Keep in mind that using an <code>Object</code> you can use <code>undefined</code> or <code>&apos;&apos;</code> as key.</p>
<p>Also be careful about choose betweetn <code>Object</code> or <code>Array</code> for this purpose:</p>
<ul>
<li>If you need a incremental index, use <code>Array</code>.</li>
<li>In other case use <code>Object</code>.</li>
</ul>
<p>Under <code>ES2015</code>, consider use <code>Map</code> or <code>Set</code> combined with <code>Symbol</code>.</p>
<p>Althought is more readable, not in all scenarios use a lookup table is better: The cost of create the lookup table could be higher tan use a set of <code>if</code>/<code>else</code> statements. So, it depends about your code running time:</p>
<ul>
<li>If you have to handle a set of conditions (maybe less than 3 could be a metric) or the code running life is short, use <code>if</code>/<code>else</code>.</li>
<li>In other case use lookup table solution.</li>
</ul>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../workflow/boolean-conditions.html"><span class="title">Boolean condition</span></a></div>
          <div class="right"><a href="../workflow/math.html"><span class="label">Next: </span><span class="title">Math methods</span></a></div>
        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1 -parent"><a href="../index.html" class="link title  link-index">JS MythBusters</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../send-tip.html" class="link title  link-send-tip">Send your tip!</a>
                </li>
                <li class="menu-item -level-2"><a href="../bibliography.html" class="link title  link-bibliography">Bibliography</a>
                </li>
                <li class="menu-item -level-2"><a href="../resources.html" class="link title  link-resources">Resources</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Workflow</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../workflow/boolean-conditions.html" class="link title  link-workflowboolean-conditions">Boolean condition</a>
                </li>
                <li class="menu-item -level-2"><a href="../workflow/lookup-table.html" class="link title -active link-workflowlookup-table">Lookup table</a>
                </li>
                <li class="menu-item -level-2"><a href="../workflow/math.html" class="link title  link-workflowmath">Math methods</a>
                </li>
                <li class="menu-item -level-2"><a href="../workflow/memoization.html" class="link title  link-workflowmemoization">Memoizaton</a>
                </li>
                <li class="menu-item -level-2"><a href="../workflow/scope.html" class="link title  link-workflowscope">Scope</a>
                </li>
                <li class="menu-item -level-2"><a href="../workflow/variable-access.html" class="link title  link-workflowvariable-access">Variable access</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">V8</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../v8-tips/hidden-class.html" class="link title  link-v8-tipshidden-class">Hidden Class</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/sparse-arrays.html" class="link title  link-v8-tipssparse-arrays">Sparse Arrays</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/float-number.html" class="link title  link-v8-tipsfloat-number">Float Number</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/inline-initialization.html" class="link title  link-v8-tipsinline-initialization">Inline initialization</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/monomorphic.html" class="link title  link-v8-tipsmonomorphic">Monomorphic</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/use-strict.html" class="link title  link-v8-tipsuse-strict">use strict</a>
                </li>
                <li class="menu-item -level-2"><a href="../v8-tips/freeing-memory.html" class="link title  link-v8-tipsfreeing-memory">Freeing memory</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Array</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../array/preallocation.html" class="link title  link-arraypreallocation">Preallocation</a>
                </li>
                <li class="menu-item -level-2"><a href="../array/pop-or-shift.html" class="link title  link-arraypop-or-shift">.pop over .shift</a>
                </li>
                <li class="menu-item -level-2"><a href="../array/arguments.html" class="link title  link-arrayarguments">arguments is special</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Date</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../date/timestamp.html" class="link title  link-datetimestamp">Creating timestamps</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Error</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../error/try-catch.html" class="link title  link-errortry-catch">Avoid try/catch</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Function</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../function/new.html" class="link title  link-functionnew">new agnostic</a>
                </li>
                <li class="menu-item -level-2"><a href="../function/bind.html" class="link title  link-functionbind">.bind is slower</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">RegexEp</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../regexp/common-sense.html" class="link title  link-regexpcommon-sense">Common sense</a>
                </li>
                <li class="menu-item -level-2"><a href="../regexp/fail-faster.html" class="link title  link-regexpfail-faster">Focus on failing faster</a>
                </li>
                <li class="menu-item -level-2"><a href="../regexp/methods.html" class="link title  link-regexpmethods">Correct method</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">String</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="../string/concat.html" class="link title  link-stringconcat">+= for concat</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>